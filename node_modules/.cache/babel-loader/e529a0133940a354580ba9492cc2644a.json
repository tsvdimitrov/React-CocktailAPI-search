{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Tsvetomir/Desktop/SoftUni/React-CocktailAPI-search/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Tsvetomir/Desktop/SoftUni/React-CocktailAPI-search/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Tsvetomir/Desktop/SoftUni/React-CocktailAPI-search/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from\"react\";import{useCallback}from\"react\";import SearchForm from\"./components/SearchForm\";import{jsx as _jsx}from\"react/jsx-runtime\";var url=\"https://www.thecocktaildb.com/api/json/v1/1/search.php?s=\";var AppContext=/*#__PURE__*/React.createContext();var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"a\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cocktails=_useState6[0],setCocktails=_useState6[1];// console.log(cocktails);\nvar fetchDrinks=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,drinks,newCocktails;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return fetch(\"\".concat(url).concat(searchTerm));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;drinks=data.drinks;if(drinks){newCocktails=drinks.map(function(item){var idDrink=item.idDrink,strDrink=item.strDrink,strDrinkThumb=item.strDrinkThumb,strAlcoholic=item.strAlcoholic,strGlass=item.strGlass;return{id:idDrink,name:strDrink,image:strDrinkThumb,info:strAlcoholic,glass:strGlass};});setCocktails(newCocktails);}else{setCocktails([]);}setLoading(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);})),[searchTerm]);useEffect(function(){fetchDrinks();},[searchTerm,fetchDrinks]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:{loading:loading,searchTerm:searchTerm,cocktails:cocktails,setCocktails:setCocktails,setSearchTerm:setSearchTerm},children:children});};// make sure use\nexport var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider};","map":{"version":3,"names":["React","useState","useContext","useEffect","useCallback","SearchForm","url","AppContext","createContext","AppProvider","children","loading","setLoading","searchTerm","setSearchTerm","cocktails","setCocktails","fetchDrinks","fetch","response","json","data","drinks","newCocktails","map","item","idDrink","strDrink","strDrinkThumb","strAlcoholic","strGlass","id","name","image","info","glass","console","log","useGlobalContext"],"sources":["C:/Users/Tsvetomir/Desktop/SoftUni/React-CocktailAPI-search/src/context.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport SearchForm from \"./components/SearchForm\";\r\n\r\nconst url = \"https://www.thecocktaildb.com/api/json/v1/1/search.php?s=\";\r\nconst AppContext = React.createContext();\r\n\r\nconst AppProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState(\"a\");\r\n    const [cocktails, setCocktails] = useState([]);\r\n    // console.log(cocktails);\r\n    const fetchDrinks = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${url}${searchTerm}`);\r\n            const data = await response.json();\r\n            const { drinks } = data;\r\n\r\n            if (drinks) {\r\n                const newCocktails = drinks.map((item) => {\r\n                    const { idDrink, strDrink, strDrinkThumb, strAlcoholic, strGlass } =\r\n                        item;\r\n                    return {\r\n                        id: idDrink,\r\n                        name: strDrink,\r\n                        image: strDrinkThumb,\r\n                        info: strAlcoholic,\r\n                        glass: strGlass,\r\n                    };\r\n                });\r\n                setCocktails(newCocktails);\r\n            } else {\r\n                setCocktails([]);\r\n            }\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.log(error);\r\n            setLoading(false);\r\n        }\r\n    }, [searchTerm]);\r\n\r\n    useEffect(() => {\r\n        fetchDrinks();\r\n    }, [searchTerm, fetchDrinks]);\r\n\r\n    return (\r\n        <AppContext.Provider\r\n            value={{ loading, searchTerm, cocktails, setCocktails, setSearchTerm }}\r\n        >\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n};\r\n// make sure use\r\nexport const useGlobalContext = () => {\r\n    return useContext(AppContext);\r\n};\r\n\r\nexport { AppContext, AppProvider };\r\n"],"mappings":"mcAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAASC,WAAT,KAA4B,OAA5B,CACA,MAAOC,WAAP,KAAuB,yBAAvB,C,2CAEA,GAAMC,IAAG,CAAG,2DAAZ,CACA,GAAMC,WAAU,cAAGP,KAAK,CAACQ,aAAN,EAAnB,CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAClC,cAA8BT,QAAQ,CAAC,KAAD,CAAtC,wCAAOU,OAAP,eAAgBC,UAAhB,eACA,eAAoCX,QAAQ,CAAC,GAAD,CAA5C,yCAAOY,UAAP,eAAmBC,aAAnB,eACA,eAAkCb,QAAQ,CAAC,EAAD,CAA1C,yCAAOc,SAAP,eAAkBC,YAAlB,eACA;AACA,GAAMC,YAAW,CAAGb,WAAW,wEAAC,2KAC5BQ,UAAU,CAAC,IAAD,CAAV,CAD4B,sCAGDM,MAAK,WAAIZ,GAAJ,SAAUO,UAAV,EAHJ,QAGlBM,QAHkB,qCAILA,SAAQ,CAACC,IAAT,EAJK,QAIlBC,IAJkB,eAKhBC,MALgB,CAKLD,IALK,CAKhBC,MALgB,CAOxB,GAAIA,MAAJ,CAAY,CACFC,YADE,CACaD,MAAM,CAACE,GAAP,CAAW,SAACC,IAAD,CAAU,CACtC,GAAQC,QAAR,CACID,IADJ,CAAQC,OAAR,CAAiBC,QAAjB,CACIF,IADJ,CAAiBE,QAAjB,CAA2BC,aAA3B,CACIH,IADJ,CAA2BG,aAA3B,CAA0CC,YAA1C,CACIJ,IADJ,CAA0CI,YAA1C,CAAwDC,QAAxD,CACIL,IADJ,CAAwDK,QAAxD,CAEA,MAAO,CACHC,EAAE,CAAEL,OADD,CAEHM,IAAI,CAAEL,QAFH,CAGHM,KAAK,CAAEL,aAHJ,CAIHM,IAAI,CAAEL,YAJH,CAKHM,KAAK,CAAEL,QALJ,CAAP,CAOH,CAVoB,CADb,CAYRd,YAAY,CAACO,YAAD,CAAZ,CACH,CAbD,IAaO,CACHP,YAAY,CAAC,EAAD,CAAZ,CACH,CACDJ,UAAU,CAAC,KAAD,CAAV,CAvBwB,iFAyBxBwB,OAAO,CAACC,GAAR,cACAzB,UAAU,CAAC,KAAD,CAAV,CA1BwB,qEAAD,GA4B5B,CAACC,UAAD,CA5B4B,CAA/B,CA8BAV,SAAS,CAAC,UAAM,CACZc,WAAW,GACd,CAFQ,CAEN,CAACJ,UAAD,CAAaI,WAAb,CAFM,CAAT,CAIA,mBACI,KAAC,UAAD,CAAY,QAAZ,EACI,KAAK,CAAE,CAAEN,OAAO,CAAPA,OAAF,CAAWE,UAAU,CAAVA,UAAX,CAAuBE,SAAS,CAATA,SAAvB,CAAkCC,YAAY,CAAZA,YAAlC,CAAgDF,aAAa,CAAbA,aAAhD,CADX,UAGKJ,QAHL,EADJ,CAOH,CA9CD,CA+CA;AACA,MAAO,IAAM4B,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAClC,MAAOpC,WAAU,CAACK,UAAD,CAAjB,CACH,CAFM,CAIP,OAASA,UAAT,CAAqBE,WAArB"},"metadata":{},"sourceType":"module"}